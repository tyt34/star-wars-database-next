# _Next.js_

- Тему
- Кеширование post запросов
- Дедупликацию get запросов
- повторная проверка данных (Ревалидация)
- параллельная выборка данных
  [ссылка](https://nextjs.org/docs/app/building-your-application/data-fetching/fetching#parallel-data-fetching)
- использовать функции для кук
  [ссылка](https://nextjs.org/docs/app/api-reference/functions/cookies)
- использовать все пропсы изображения
  [ссылка](https://nextjs.org/docs/pages/api-reference/components/image)

## Что было не понято

- Как реализовывается стейт менеджер в next, если он должен быть в корне
- Использование файлов loading.js
- использование async await use в серверных компонентах
  [ссылка](https://nextjs.org/docs/app/building-your-application/data-fetching/fetching#default-caching-behavior)
- непонятно зачем worker для скрипт
  [скрипт](https://nextjs.org/docs/pages/api-reference/components/script#worker)
- useSWR

## Термины

### ISR

**ISR** (_Incremental_ _Static_ _Regeneration_) - это функция в
_Next.js_, которая позволяет генерировать и обновлять статические
страницы при необходимости во время выполнения (_runtime_).

В стандартном статическом рендеринге (_SSG_) страницы предварительно
генерируются на этапе сборки, и обновление контента требует повторной
генерации всей страницы. Однако с _ISR_ можно задать устаревание
(_revalidation_) для каждой статической страницы. Таким образом,
страницы могут быть предварительно сгенерированы при сборке и
обновляться автоматически с определенной периодичностью или по
определенному событию.

_ISR_ позволяет предоставлять актуальный контент пользователям на
статических страницах без необходимости полной перегенерации страницы.
Это особенно полезно для страниц с часто обновляемым контентом или
динамическими данными, такими как новости, блоги, каталоги товаров и т.
д.

Преимущества _ISR_ включают:

Быстрое отображение контента: Пользователи могут видеть предварительно
сгенерированный контент сразу же, а обновленный контент появляется
позднее без задержек.

Эффективное использование ресурсов: Только обновленная часть страницы
перегенерируется, что позволяет сэкономить ресурсы сервера и ускоряет
процесс обновления.

Гибкость в обновлении: Вы можете настроить время устаревания для каждой
страницы, чтобы определить, как часто страница должна быть обновлена.

Для использования _ISR_ в _Next.js_ необходимо использовать функцию
_getStaticProps_ с опцией _revalidate_, которая определяет период
устаревания страницы. Например:

```
export async function getStaticProps() {
  // Логика получения данных
  // ...

  return {
    props: {
      // Данные для страницы
      // ...
    },
    revalidate: 60, // Период устаревания в секундах
  };
}
```

В этом примере страница будет обновляться каждые 60 секунд. При запросе
страницы после истечения времени устаревания, _Next.js_ автоматически
сгенерирует новую версию страницы перед ее отображением пользователю.

_ISR_ позволяет сочетать преимущества статического рендеринга и
динамического контента, обеспечивая быструю и актуальную загрузку
страниц для пользователей.

## Функции _Next.js_

### getInitialProps

Функция **getInitialProps** в _Next.js_ является методом жизненного
цикла страницы, который позволяет предварительно получить данные,
необходимые для рендеринга страницы на сервере (_SSR_) или на стороне
клиента (_CSR_).

Основной смысл функции _getInitialProps_ заключается в том, что она
позволяет предварительно загрузить данные, которые требуются для
отображения страницы, прежде чем она будет отправлена клиенту. Это
особенно полезно, когда страница зависит от внешних источников данных,
таких как API запросы или запросы к базе данных.

Функция _getInitialProps_ выполняется на сервере при первом запросе к
странице и на клиенте при навигации по ссылкам внутри приложения.
Результат выполнения функции передается в компонент страницы в качестве
свойства props. Затем эти данные могут быть использованы для рендеринга
компонента страницы с нужными данными.

Основное применение _getInitialProps_ включает предварительную загрузку
данных, их обработку и передачу в компонент страницы для рендеринга. Это
позволяет обеспечить полную инициализацию страницы перед ее отображением
пользователю, улучшая производительность и SEO-оптимизацию.

Важно отметить, что начиная с версии _Next.js_ 9.3, функция
_getInitialProps_ считается устаревшей и рекомендуется использовать
более новый подход с помощью функции getServerSideProps или
getStaticProps, в зависимости от требований вашего приложения.

### getServerSideProps

Функция **getServerSideProps** в _Next.js_ является методом жизненного
цикла страницы, который позволяет предварительно получить данные на
сервере для рендеринга страницы при каждом запросе.

Основной смысл функции _getServerSideProps_ заключается в возможности
выполнять серверную предварительную загрузку данных для каждого запроса
к странице. Это означает, что данные будут обновляться при каждом
запросе, что особенно полезно в случаях, когда данные зависят от
параметров запроса или часто изменяются.

Когда пользователь делает запрос к странице, функция
_getServerSideProps_ выполняется на сервере, и результат ее выполнения
передается в компонент страницы в качестве свойства props. Затем эти
данные могут быть использованы для рендеринга компонента страницы с
нужными данными. Таким образом, каждый раз при запросе страницы будут
получены актуальные данные.

Основное применение _getServerSideProps_ включает загрузку данных с
внешних источников, обработку запросов к базе данных или выполнение
любых других операций, необходимых для получения данных для рендеринга
страницы. Это позволяет обеспечить динамическую генерацию страницы на
сервере при каждом запросе.

Важно отметить, что функция _getServerSideProps_ является асинхронной и
должна быть экспортирована из файла страницы в _Next.js_. Кроме того,
она может быть использована только в файлах страниц, а не в компонентах.

Функция _getServerSideProps_ является альтернативой функции
_getStaticProps_, которая предназначена для предварительной загрузки
данных на этапе сборки и является статической. Разница состоит в том,
что getServerSideProps выполняется на сервере при каждом запросе, в то
время как _getStaticProps_ выполняется только при сборке приложения.

### getStaticPaths

Функция **getStaticPaths** в _Next.js_ используется для предварительного
генерирования статических маршрутов (_paths_) на этапе сборки
приложения. Эта функция позволяет динамически определить, какие маршруты
должны быть предварительно сгенерированы, а также какие параметры
необходимо использовать для каждого маршрута.

Основной смысл функции _getStaticPaths_ состоит в возможности
предварительно генерировать статические страницы для динамических
маршрутов, которые содержат параметры. Когда пользователь делает запрос
к таким страницам, параметры маршрута могут быть использованы для
загрузки соответствующих данных и динамического рендеринга страницы.

Функция _getStaticPaths_ должна возвращать объект, содержащий два
свойства:

- _paths_: Массив объектов, представляющих каждый предварительно
  сгенерированный маршрут. Каждый объект должен содержать свойство
  _params_, которое представляет параметры маршрута.
- _fallback_: Булевое значение, определяющее поведение при обращении к
  маршруту, который не был предварительно сгенерирован. Если _fallback_
  равно _false_, то любой запрос к несуществующему маршруту будет
  возвращать страницу 404. Если _fallback_ равно _true_ или _blocking_,
  то _Next.js_ будет генерировать страницу на лету при каждом запросе к
  несуществующему маршруту.

Основное применение _getStaticPaths_ состоит в динамическом
предварительном генерировании страниц для маршрутов с параметрами.
Например, если у вас есть блог с постами, каждый пост может иметь свой
уникальный маршрут. Используя _getStaticPaths_, вы можете определить,
какие посты должны быть предварительно сгенерированы на этапе сборки
приложения, чтобы они были доступны как статические страницы.

Важно отметить, что функция _getStaticPaths_ должна быть экспортирована
из файла страницы в _Next.js_. Она используется только в динамических
маршрутах и играет роль в предварительной генерации статических страниц
на этапе сборки приложения.

### getStaticProps

Функция **getStaticProps** в _Next.js_ используется для предварительного
получения данных на этапе сборки (_build_ _time_) приложения. Она
позволяет предварительно сгенерировать статические страницы с нужными
данными, которые будут использоваться при рендеринге страницы на стороне
сервера.

Основной смысл функции _getStaticProps_ заключается в возможности
предварительно получать данные для статических страниц на этапе сборки.
Это особенно полезно для страниц с содержимым, которое не зависит от
запросов пользователей и остается неизменным для каждого запроса.

Функция _getStaticProps_ должна быть экспортирована из файла страницы в
_Next.js_ и должна возвращать объект с данными. Возвращаемый объект
должен содержать свойство _props_, которое представляет данные,
необходимые для рендеринга страницы.

_getStaticProps_ может выполнять запросы к базе данных, внешним _API_
или любым другим источникам данных, чтобы получить необходимую
информацию для страницы. Эти данные затем передаются в компонент
страницы в качестве свойства (_props_), и они могут быть использованы
для динамического рендеринга страницы с нужными данными.

Основное применение _getStaticProps_ состоит в предварительном получении
данных для статических страниц. Например, если у вас есть блог, вы
можете использовать _getStaticProps_ для получения списка постов перед
сборкой приложения и предварительного создания статических страниц для
каждого поста с соответствующими данными.

Важно отметить, что функция _getStaticProps_ может быть асинхронной, и
она должна вернуть данные в структуре _JSON_. При использовании этой
функции страница будет предварительно сгенерирована на этапе сборки
приложения и будет использовать полученные данные при каждом запросе к
этой странице.

### NextRequest and NextResponse

В _Next.js_ функции NextRequest и _NextResponse_ представляют объекты
запроса и ответа соответственно, которые могут быть использованы для
обработки _HTTP_-запросов и формирования _HTTP_-ответов.

_NextRequest_ представляет объект запроса и содержит информацию о
запросе, такую как _URL_, метод _HTTP_, заголовки, параметры запроса и
тело запроса. Он предоставляет методы для доступа к этой информации,
например, для получения значения заголовка или параметра запроса.

_NextResponse_ представляет объект ответа и используется для
формирования _HTTP_-ответа, который будет отправлен клиенту. Он
предоставляет методы для установки заголовков ответа, статуса ответа и
тела ответа.

Вместе _NextRequest_ и _NextResponse_ образуют _API_, которое позволяет
вам взаимодействовать с запросами и ответами на уровне сервера в
_Next.js_. Вы можете использовать их для выполнения различных задач,
таких как маршрутизация запросов, обработка данных, проверка
аутентификации и авторизации, установка кук и многое другое.

Примеры использования _NextRequest_ и NextResponse могут включать
получение данных из запроса, валидацию данных, отправку различных типов
ответов (_HTML_, _JSON_, файлы), установку заголовков ответа,
перенаправление запросов и другие манипуляции с запросами и ответами.

Обратите внимание, что _NextRequest_ и NextResponse являются частью
_API_ серверной части _Next.js_ и обычно используются при реализации
серверных маршрутов или _API_ эндпоинтов. Они доступны в функциях
обработчиков маршрутов, которые могут быть определены с использованием
_API_ маршрутов _Next.js_ или в функции _getServerSideProps_ для
серверного рендеринга страниц.

### useAmp

Функция **useAmp** в _Next.js_ используется для определения, выполняется
ли текущий запрос в режиме _AMP_ (_Accelerated_ _Mobile_ _Pages_) или
нет.

_AMP_ - это открытый стандарт разработки веб-страниц с высокой
производительностью, оптимизированных для мобильных устройств. Он
предоставляет средства для создания быстрых и легких веб-страниц,
которые могут быть мгновенно загружены и отображены на мобильных
устройствах.

Функция _useAmp_ возвращает булевое значение, которое указывает,
является ли текущий запрос режимом _AMP_ или нет. Если функция
возвращает _true_, это означает, что запрос выполняется в режиме _AMP_,
и вы можете принимать соответствующие действия или настраивать контент
специально для _AMP_.

Пример использования функции _useAmp_ может быть следующим:

```
// jsx
import { useAmp } from 'next/amp'

function MyComponent() {
  const isAmp = useAmp()

  if (isAmp) {
    // Код для режима AMP
    return <amp-component>...</amp-component>
  } else {
    // Код для обычного режима
    return <div>...</div>
  }
}
```

Вы можете использовать функцию _useAmp_ для условного рендеринга
компонентов, настройки заголовков страницы, добавления специальных
компонентов _AMP_ и других манипуляций, специфичных для режима _AMP_.

Обратите внимание, что функция _useAmp_ доступна только в компонентах,
рендерящихся на сервере или статически. Она не работает в компонентах,
рендерящихся на клиенте.

### useReportWebVitals

Функция **useReportWebVitals** в _Next.js_ используется для отслеживания
и отправки веб-виталов (_web_ _vitals_) в различные аналитические
инструменты или сервисы мониторинга производительности.

Функция _useReportWebVitals_ позволяет вам подписываться на изменения
веб-виталов в вашем _Next.js_ приложении. Когда эти метрики обновляются,
функция вызывается с соответствующими данными, которые вы можете
использовать для отправки этих метрик в вашу аналитическую систему или
сервис мониторинга производительности.

Пример использования функции _useReportWebVitals_ может быть следующим:

```
// jsx
import { useReportWebVitals } from 'next/dist/next-server/lib/web-vitals'

function MyApp({ Component, pageProps }) {
  useReportWebVitals((metric) => {
    // Отправить метрику в аналитическую систему
    console.log(metric)
  })

  return <Component {...pageProps} />
}

export default MyApp
```

В этом примере мы используем _useReportWebVitals_ внутри главного
компонента _MyApp_ _Next.js_ приложения. Когда происходит обновление
веб-виталов, функция переданная в _useReportWebVitals_ будет вызываться
с объектом метрики, который вы можете использовать для отправки этих
данных в вашу систему аналитики или другие цели.

Функция _useReportWebVitals_ позволяет вам интегрировать мониторинг
производительности и аналитику в ваше _Next.js_ приложение, чтобы
получать информацию о производительности и пользовательском опыте, и
принимать соответствующие действия для их улучшения.

### useRouter

Функция **useRouter** в _Next.js_ предоставляет доступ к объекту
_router_, который содержит информацию о текущем маршруте (_route_) и
позволяет взаимодействовать с навигацией в вашем приложении.

С помощью функции _useRouter_ вы можете получить доступ к различным
свойствам и методам объекта _router_, таким как:

- _pathname_: Строка, представляющая текущий путь (_pathname_) _URL_
- _query_: Объект, содержащий параметры запроса (_query_ _parameters_)
  из _URL_
- _asPath_: Строка, содержащая полный _URL_-путь (включая параметры
  запроса)
- _push_(): Метод для добавления нового _URL_ в историю браузера и
  навигации к новой странице
- _replace_(): Метод для замены текущего _URL_ в истории браузера и
  навигации к новой странице
- _reload_(): Метод для перезагрузки текущей страницы.
- и другие

Пример использования функции _useRouter_ может быть следующим:

```
// jsx
import { useRouter } from 'next/router'

function MyComponent() {
  const router = useRouter()

  // Получить текущий путь
  const currentPath = router.pathname

  // Навигация к новой странице
  const handleClick = () => {
    router.push('/new-page')
  }

  return (
    <div>
      <p>Current Path: {currentPath}</p>
      <button onClick={handleClick}>Go to New Page</button>
    </div>
  )
}
```

В этом примере мы используем _useRouter_ для получения объекта _router_.
Мы используем _router.pathname_ для отображения текущего пути и
_router.push('/new-page')_ для перехода на новую страницу при клике на
кнопку.

Функция useRouter позволяет вам управлять навигацией в вашем _Next.js_
приложении, получать информацию о текущем маршруте и выполнять различные
действия, связанные с маршрутизацией.

# _Next.js_

- Тему
- Кеширование post запросов
- Дедупликацию get запросов
- повторная проверка данных (Ревалидация)
- параллельная выборка данных
  [ссылка](https://nextjs.org/docs/app/building-your-application/data-fetching/fetching#parallel-data-fetching)
- использовать функции для кук
  [ссылка](https://nextjs.org/docs/app/api-reference/functions/cookies)
- использовать все пропсы изображения
  [ссылка](https://nextjs.org/docs/pages/api-reference/components/image)

## Что было не понято

- Как реализовывается стейт менеджер в next, если он должен быть в корне
- Использование файлов loading.js
- использование async await use в серверных компонентах
  [ссылка](https://nextjs.org/docs/app/building-your-application/data-fetching/fetching#default-caching-behavior)
- непонятно зачем worker для скрипт
  [скрипт](https://nextjs.org/docs/pages/api-reference/components/script#worker)
- useSWR

## Термины

### ISR

**ISR** (_Incremental_ _Static_ _Regeneration_) - это функция в
_Next.js_, которая позволяет генерировать и обновлять статические
страницы при необходимости во время выполнения (_runtime_).

В стандартном статическом рендеринге (_SSG_) страницы предварительно
генерируются на этапе сборки, и обновление контента требует повторной
генерации всей страницы. Однако с _ISR_ можно задать устаревание
(_revalidation_) для каждой статической страницы. Таким образом,
страницы могут быть предварительно сгенерированы при сборке и
обновляться автоматически с определенной периодичностью или по
определенному событию.

_ISR_ позволяет предоставлять актуальный контент пользователям на
статических страницах без необходимости полной перегенерации страницы.
Это особенно полезно для страниц с часто обновляемым контентом или
динамическими данными, такими как новости, блоги, каталоги товаров и т.
д.

Преимущества _ISR_ включают:

Быстрое отображение контента: Пользователи могут видеть предварительно
сгенерированный контент сразу же, а обновленный контент появляется
позднее без задержек.

Эффективное использование ресурсов: Только обновленная часть страницы
перегенерируется, что позволяет сэкономить ресурсы сервера и ускоряет
процесс обновления.

Гибкость в обновлении: Вы можете настроить время устаревания для каждой
страницы, чтобы определить, как часто страница должна быть обновлена.

Для использования _ISR_ в _Next.js_ необходимо использовать функцию
_getStaticProps_ с опцией _revalidate_, которая определяет период
устаревания страницы. Например:

```
export async function getStaticProps() {
  // Логика получения данных
  // ...

  return {
    props: {
      // Данные для страницы
      // ...
    },
    revalidate: 60, // Период устаревания в секундах
  };
}
```

В этом примере страница будет обновляться каждые 60 секунд. При запросе
страницы после истечения времени устаревания, _Next.js_ автоматически
сгенерирует новую версию страницы перед ее отображением пользователю.

_ISR_ позволяет сочетать преимущества статического рендеринга и
динамического контента, обеспечивая быструю и актуальную загрузку
страниц для пользователей.

## Функции _Next.js_

### getInitialProps

Функция **getInitialProps** в _Next.js_ является методом жизненного
цикла страницы, который позволяет предварительно получить данные,
необходимые для рендеринга страницы на сервере (_SSR_) или на стороне
клиента (_CSR_).

Основной смысл функции _getInitialProps_ заключается в том, что она
позволяет предварительно загрузить данные, которые требуются для
отображения страницы, прежде чем она будет отправлена клиенту. Это
особенно полезно, когда страница зависит от внешних источников данных,
таких как API запросы или запросы к базе данных.

Функция _getInitialProps_ выполняется на сервере при первом запросе к
странице и на клиенте при навигации по ссылкам внутри приложения.
Результат выполнения функции передается в компонент страницы в качестве
свойства props. Затем эти данные могут быть использованы для рендеринга
компонента страницы с нужными данными.

Основное применение _getInitialProps_ включает предварительную загрузку
данных, их обработку и передачу в компонент страницы для рендеринга. Это
позволяет обеспечить полную инициализацию страницы перед ее отображением
пользователю, улучшая производительность и SEO-оптимизацию.

Важно отметить, что начиная с версии _Next.js_ 9.3, функция
_getInitialProps_ считается устаревшей и рекомендуется использовать
более новый подход с помощью функции getServerSideProps или
getStaticProps, в зависимости от требований вашего приложения.

### getServerSideProps

Функция **getServerSideProps** в _Next.js_ является методом жизненного
цикла страницы, который позволяет предварительно получить данные на
сервере для рендеринга страницы при каждом запросе.

Основной смысл функции _getServerSideProps_ заключается в возможности
выполнять серверную предварительную загрузку данных для каждого запроса
к странице. Это означает, что данные будут обновляться при каждом
запросе, что особенно полезно в случаях, когда данные зависят от
параметров запроса или часто изменяются.

Когда пользователь делает запрос к странице, функция
_getServerSideProps_ выполняется на сервере, и результат ее выполнения
передается в компонент страницы в качестве свойства props. Затем эти
данные могут быть использованы для рендеринга компонента страницы с
нужными данными. Таким образом, каждый раз при запросе страницы будут
получены актуальные данные.

Основное применение _getServerSideProps_ включает загрузку данных с
внешних источников, обработку запросов к базе данных или выполнение
любых других операций, необходимых для получения данных для рендеринга
страницы. Это позволяет обеспечить динамическую генерацию страницы на
сервере при каждом запросе.

Важно отметить, что функция _getServerSideProps_ является асинхронной и
должна быть экспортирована из файла страницы в _Next.js_. Кроме того,
она может быть использована только в файлах страниц, а не в компонентах.

Функция _getServerSideProps_ является альтернативой функции
_getStaticProps_, которая предназначена для предварительной загрузки
данных на этапе сборки и является статической. Разница состоит в том,
что getServerSideProps выполняется на сервере при каждом запросе, в то
время как _getStaticProps_ выполняется только при сборке приложения.

### getStaticPaths

Функция **getStaticPaths** в _Next.js_ используется для предварительного
генерирования статических маршрутов (_paths_) на этапе сборки
приложения. Эта функция позволяет динамически определить, какие маршруты
должны быть предварительно сгенерированы, а также какие параметры
необходимо использовать для каждого маршрута.

Основной смысл функции _getStaticPaths_ состоит в возможности
предварительно генерировать статические страницы для динамических
маршрутов, которые содержат параметры. Когда пользователь делает запрос
к таким страницам, параметры маршрута могут быть использованы для
загрузки соответствующих данных и динамического рендеринга страницы.

Функция _getStaticPaths_ должна возвращать объект, содержащий два
свойства:

- _paths_: Массив объектов, представляющих каждый предварительно
  сгенерированный маршрут. Каждый объект должен содержать свойство
  _params_, которое представляет параметры маршрута.
- _fallback_: Булевое значение, определяющее поведение при обращении к
  маршруту, который не был предварительно сгенерирован. Если _fallback_
  равно _false_, то любой запрос к несуществующему маршруту будет
  возвращать страницу 404. Если _fallback_ равно _true_ или _blocking_,
  то _Next.js_ будет генерировать страницу на лету при каждом запросе к
  несуществующему маршруту.

Основное применение _getStaticPaths_ состоит в динамическом
предварительном генерировании страниц для маршрутов с параметрами.
Например, если у вас есть блог с постами, каждый пост может иметь свой
уникальный маршрут. Используя _getStaticPaths_, вы можете определить,
какие посты должны быть предварительно сгенерированы на этапе сборки
приложения, чтобы они были доступны как статические страницы.

Важно отметить, что функция _getStaticPaths_ должна быть экспортирована
из файла страницы в _Next.js_. Она используется только в динамических
маршрутах и играет роль в предварительной генерации статических страниц
на этапе сборки приложения.

### getStaticProps

Функция **getStaticProps** в _Next.js_ используется для предварительного
получения данных на этапе сборки (_build_ _time_) приложения. Она
позволяет предварительно сгенерировать статические страницы с нужными
данными, которые будут использоваться при рендеринге страницы на стороне
сервера.

Основной смысл функции _getStaticProps_ заключается в возможности
предварительно получать данные для статических страниц на этапе сборки.
Это особенно полезно для страниц с содержимым, которое не зависит от
запросов пользователей и остается неизменным для каждого запроса.

Функция _getStaticProps_ должна быть экспортирована из файла страницы в
_Next.js_ и должна возвращать объект с данными. Возвращаемый объект
должен содержать свойство _props_, которое представляет данные,
необходимые для рендеринга страницы.

_getStaticProps_ может выполнять запросы к базе данных, внешним _API_
или любым другим источникам данных, чтобы получить необходимую
информацию для страницы. Эти данные затем передаются в компонент
страницы в качестве свойства (_props_), и они могут быть использованы
для динамического рендеринга страницы с нужными данными.

Основное применение _getStaticProps_ состоит в предварительном получении
данных для статических страниц. Например, если у вас есть блог, вы
можете использовать _getStaticProps_ для получения списка постов перед
сборкой приложения и предварительного создания статических страниц для
каждого поста с соответствующими данными.

Важно отметить, что функция _getStaticProps_ может быть асинхронной, и
она должна вернуть данные в структуре _JSON_. При использовании этой
функции страница будет предварительно сгенерирована на этапе сборки
приложения и будет использовать полученные данные при каждом запросе к
этой странице.

### NextRequest and NextResponse

В _Next.js_ функции NextRequest и _NextResponse_ представляют объекты
запроса и ответа соответственно, которые могут быть использованы для
обработки _HTTP_-запросов и формирования _HTTP_-ответов.

_NextRequest_ представляет объект запроса и содержит информацию о
запросе, такую как _URL_, метод _HTTP_, заголовки, параметры запроса и
тело запроса. Он предоставляет методы для доступа к этой информации,
например, для получения значения заголовка или параметра запроса.

_NextResponse_ представляет объект ответа и используется для
формирования _HTTP_-ответа, который будет отправлен клиенту. Он
предоставляет методы для установки заголовков ответа, статуса ответа и
тела ответа.

Вместе _NextRequest_ и _NextResponse_ образуют _API_, которое позволяет
вам взаимодействовать с запросами и ответами на уровне сервера в
_Next.js_. Вы можете использовать их для выполнения различных задач,
таких как маршрутизация запросов, обработка данных, проверка
аутентификации и авторизации, установка кук и многое другое.

Примеры использования _NextRequest_ и NextResponse могут включать
получение данных из запроса, валидацию данных, отправку различных типов
ответов (_HTML_, _JSON_, файлы), установку заголовков ответа,
перенаправление запросов и другие манипуляции с запросами и ответами.

Обратите внимание, что _NextRequest_ и NextResponse являются частью
_API_ серверной части _Next.js_ и обычно используются при реализации
серверных маршрутов или _API_ эндпоинтов. Они доступны в функциях
обработчиков маршрутов, которые могут быть определены с использованием
_API_ маршрутов _Next.js_ или в функции _getServerSideProps_ для
серверного рендеринга страниц.

### useAmp

Функция **useAmp** в _Next.js_ используется для определения, выполняется
ли текущий запрос в режиме _AMP_ (_Accelerated_ _Mobile_ _Pages_) или
нет.

_AMP_ - это открытый стандарт разработки веб-страниц с высокой
производительностью, оптимизированных для мобильных устройств. Он
предоставляет средства для создания быстрых и легких веб-страниц,
которые могут быть мгновенно загружены и отображены на мобильных
устройствах.

Функция _useAmp_ возвращает булевое значение, которое указывает,
является ли текущий запрос режимом _AMP_ или нет. Если функция
возвращает _true_, это означает, что запрос выполняется в режиме _AMP_,
и вы можете принимать соответствующие действия или настраивать контент
специально для _AMP_.

Пример использования функции _useAmp_ может быть следующим:

```
// jsx
import { useAmp } from 'next/amp'

function MyComponent() {
  const isAmp = useAmp()

  if (isAmp) {
    // Код для режима AMP
    return <amp-component>...</amp-component>
  } else {
    // Код для обычного режима
    return <div>...</div>
  }
}
```

Вы можете использовать функцию _useAmp_ для условного рендеринга
компонентов, настройки заголовков страницы, добавления специальных
компонентов _AMP_ и других манипуляций, специфичных для режима _AMP_.

Обратите внимание, что функция _useAmp_ доступна только в компонентах,
рендерящихся на сервере или статически. Она не работает в компонентах,
рендерящихся на клиенте.

### useReportWebVitals

Функция **useReportWebVitals** в _Next.js_ используется для отслеживания
и отправки веб-виталов (_web_ _vitals_) в различные аналитические
инструменты или сервисы мониторинга производительности.

Функция _useReportWebVitals_ позволяет вам подписываться на изменения
веб-виталов в вашем _Next.js_ приложении. Когда эти метрики обновляются,
функция вызывается с соответствующими данными, которые вы можете
использовать для отправки этих метрик в вашу аналитическую систему или
сервис мониторинга производительности.

Пример использования функции _useReportWebVitals_ может быть следующим:

```
// jsx
import { useReportWebVitals } from 'next/dist/next-server/lib/web-vitals'

function MyApp({ Component, pageProps }) {
  useReportWebVitals((metric) => {
    // Отправить метрику в аналитическую систему
    console.log(metric)
  })

  return <Component {...pageProps} />
}

export default MyApp
```

В этом примере мы используем _useReportWebVitals_ внутри главного
компонента _MyApp_ _Next.js_ приложения. Когда происходит обновление
веб-виталов, функция переданная в _useReportWebVitals_ будет вызываться
с объектом метрики, который вы можете использовать для отправки этих
данных в вашу систему аналитики или другие цели.

Функция _useReportWebVitals_ позволяет вам интегрировать мониторинг
производительности и аналитику в ваше _Next.js_ приложение, чтобы
получать информацию о производительности и пользовательском опыте, и
принимать соответствующие действия для их улучшения.

### useRouter

Функция **useRouter** в _Next.js_ предоставляет доступ к объекту
_router_, который содержит информацию о текущем маршруте (_route_) и
позволяет взаимодействовать с навигацией в вашем приложении.

С помощью функции _useRouter_ вы можете получить доступ к различным
свойствам и методам объекта _router_, таким как:

- _pathname_: Строка, представляющая текущий путь (_pathname_) _URL_
- _query_: Объект, содержащий параметры запроса (_query_ _parameters_)
  из _URL_
- _asPath_: Строка, содержащая полный _URL_-путь (включая параметры
  запроса)
- _push_(): Метод для добавления нового _URL_ в историю браузера и
  навигации к новой странице
- _replace_(): Метод для замены текущего _URL_ в истории браузера и
  навигации к новой странице
- _reload_(): Метод для перезагрузки текущей страницы.
- и другие

Пример использования функции _useRouter_ может быть следующим:

```
// jsx
import { useRouter } from 'next/router'

function MyComponent() {
  const router = useRouter()

  // Получить текущий путь
  const currentPath = router.pathname

  // Навигация к новой странице
  const handleClick = () => {
    router.push('/new-page')
  }

  return (
    <div>
      <p>Current Path: {currentPath}</p>
      <button onClick={handleClick}>Go to New Page</button>
    </div>
  )
}
```

В этом примере мы используем _useRouter_ для получения объекта _router_.
Мы используем _router.pathname_ для отображения текущего пути и
_router.push('/new-page')_ для перехода на новую страницу при клике на
кнопку.

Функция useRouter позволяет вам управлять навигацией в вашем _Next.js_
приложении, получать информацию о текущем маршруте и выполнять различные
действия, связанные с маршрутизацией.
